<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>路由器用户必看：关闭 Rebind Protection | 山东大学镜像站</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    <meta name="renderer" content="webkit">
    <link rel="preload" href="/assets/css/0.styles.fcae68d8.css" as="style"><link rel="preload" href="/assets/js/app.db05cd12.js" as="script"><link rel="preload" href="/assets/js/2.25301b25.js" as="script"><link rel="preload" href="/assets/js/7.420259bb.js" as="script"><link rel="prefetch" href="/assets/js/10.27382cff.js"><link rel="prefetch" href="/assets/js/11.0d10567f.js"><link rel="prefetch" href="/assets/js/12.138c298e.js"><link rel="prefetch" href="/assets/js/13.a01e77aa.js"><link rel="prefetch" href="/assets/js/14.26e26ed0.js"><link rel="prefetch" href="/assets/js/15.6beb1cc7.js"><link rel="prefetch" href="/assets/js/16.c43b1f39.js"><link rel="prefetch" href="/assets/js/17.ffc17709.js"><link rel="prefetch" href="/assets/js/18.5bf1ffa9.js"><link rel="prefetch" href="/assets/js/3.92b77e97.js"><link rel="prefetch" href="/assets/js/4.45cd2963.js"><link rel="prefetch" href="/assets/js/5.eea08fae.js"><link rel="prefetch" href="/assets/js/6.e34dce28.js"><link rel="prefetch" href="/assets/js/8.5cc8923a.js"><link rel="prefetch" href="/assets/js/9.7bddbf73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fcae68d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">山东大学镜像站</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  帮助
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div> <a href="https://github.com/oops-sdu/mirrors.qd.sdu.edu.cn" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  帮助
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div> <a href="https://github.com/oops-sdu/mirrors.qd.sdu.edu.cn" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/guide/TurnOffRebindProtection.html" aria-current="page" class="active sidebar-link">路由器用户必看：关闭 Rebind Protection</a></li><li><a href="/guide/ArchLinux.html" class="sidebar-link">ArchLinux</a></li><li><a href="/guide/Debian.html" class="sidebar-link">Debian</a></li><li><a href="/guide/Ubuntu.html" class="sidebar-link">Ubuntu</a></li><li><a href="/guide/lxc-images.html" class="sidebar-link">lxc-images</a></li><li><a href="/guide/Windows-iso.html" class="sidebar-link">Windows-iso</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="路由器用户必看-关闭-rebind-protection"><a href="#路由器用户必看-关闭-rebind-protection" class="header-anchor">#</a> 路由器用户必看：关闭 Rebind Protection</h1> <h2 id="什么是-rebind-protection-为什么要关闭它"><a href="#什么是-rebind-protection-为什么要关闭它" class="header-anchor">#</a> 什么是 Rebind Protection，为什么要关闭它？</h2> <p>dnsmasq 提供了名为 rebind protection 的功能，意思是，当上游 DNS 返回了私有 IP 解析结果时，认为遭到了 DNS 劫持，从而拒绝此结果，以 NXDOMAIN 取代之。
然而，山东大学的校园网已经将私有 IPv4 网段作为了校园网的一部分，<code>10.0.0.0/8</code> <code>172.16.0.0/12</code> <code>192.168.0.0/16</code> 均被使用，以前两者尤甚。本镜像站所用服务器也使用了内网地址。因此，对应域名的 A 记录不可避免地要设置为私有 IP。
dnsmasq 默认不开启 rebind protection 功能，但官方版本的 OpenWRT 默认开启。如果你的路由器是基于 OpenWRT 的发行版，则需要手动关闭此功能。</p> <p>注意，我们仅推荐在山东大学校园网环境下关闭此功能。对于其他网络环境，应具体情况具体分析。</p> <h2 id="如何确定是否需要关闭此功能"><a href="#如何确定是否需要关闭此功能" class="header-anchor">#</a> 如何确定是否需要关闭此功能？</h2> <p>在山东大学校园网环境下，如果出现浏览器不能访问 <code>mirrors.qd.sdu.edu.cn</code> ，但可以访问 <code>10.102.7.58</code>（即前述域名对应的 A 记录）的情况，则表示当前 rebind protection 并未开启，需要关闭此功能。</p> <h2 id="如何关闭此功能"><a href="#如何关闭此功能" class="header-anchor">#</a> 如何关闭此功能？</h2> <p>对于官方版本的 OpenWRT，可参考下图。即，选择 <code>网络</code> → <code>DHCP/DNS</code>  菜单，找到 <code>重绑定保护</code>，取消勾选这个选项。最后，别忘了点击 <code>保存&amp;应用</code> 按钮。</p> <p><img src="/assets/img/TurnOffRebindProtection-pic-1.0fe441f6.png" alt=""></p> <p>一般而言，到此就结束了。</p> <h2 id="提示"><a href="#提示" class="header-anchor">#</a> 提示</h2> <p>如果路由器并未使用官方版本的 OpenWRT，也无法从设置界面中找到类似的设置，则可能无法从 Web 界面完成这个操作。此时，可以通过 SSH 连接到路由器，然后使用 <code>uci</code> 命令或者修改 <code>/etc/config/dhcp</code> 文件来达到目标。</p> <p>如果依然无法完成此操作，或者路由器并不基于 OpenWRT，但依然存在 rebind protection 问题，可将电脑端的 DNS 设置为非路由器 DNS 来直接绕过 rebind protection。注意，并非所有路由器都会允许底下的设备走第三方 DNS，有些路由器会通过 DNS 劫持的手段强制返回路由器 DNS 的结果。</p> <p>如果依然无法完成此操作，可考虑直接连接到山东大学校园网。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/oops-sdu/mirrors.qd.sdu.edu.cn/edit/master/docs/guide/TurnOffRebindProtection.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/guide/ArchLinux.html">
        ArchLinux
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db05cd12.js" defer></script><script src="/assets/js/2.25301b25.js" defer></script><script src="/assets/js/7.420259bb.js" defer></script>
  </body>
</html>
